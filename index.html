<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8">
<title>Overlevingsgame</title>
<style>
body {
  margin:0;
  overflow:hidden;
  background:#000;
  color:white;
  font-family:Arial, sans-serif;
}
#gameArea {
  position:relative;
  width:100vw;
  height:100vh;
  background:radial-gradient(circle, #320000, #000);
  overflow:hidden;
}
#player {
  position:absolute;
  width:20px;
  height:20px;
  background:#4cff00;
  border-radius:4px;
}
.enemy {
  position:absolute;
  width:40px;
  height:40px;
  background:red;
  border-radius:5px;
}
.item {
  position:absolute;
  width:20px;
  height:20px;
  border-radius:50%;
}
#score, #timer {
  position:fixed;
  top:10px;
  font-size:20px;
}
#score { left:10px; }
#timer { left:120px; }
#healthContainer, #staminaContainer {
  position:fixed;
  right:10px;
  height:15px;
  border:1px solid #555;
  background:#333;
  width:200px;
}
#healthContainer { top:10px; }
#staminaContainer { top:35px; }
#healthbar, #staminaBar {
  height:100%;
}
#healthbar { background:#f00; width:200px; }
#staminaBar { background:#0f0; width:200px; }
#gameOver {
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  font-size:50px;
  color:red;
  display:none;
  text-align:center;
}
</style>
</head>
<body>
<div id="gameArea">
  <div id="player" style="left:280px; top:180px;"></div>
  <div id="score">Score: 0</div>
  <div id="timer">Time: 30</div>
  <div id="healthContainer"><div id="healthbar"></div></div>
  <div id="staminaContainer"><div id="staminaBar"></div></div>
  <div id="gameOver">GAME OVER</div>
</div>

<script>
const gameArea = document.getElementById('gameArea');
const player = document.getElementById('player');
const healthbar = document.getElementById('healthbar');
const staminaBar = document.getElementById('staminaBar');
const gameOverDiv = document.getElementById('gameOver');
const scoreDiv = document.getElementById('score');
const timerDiv = document.getElementById('timer');

let x = 280, y = 180, speed = 5;
let maxHealth = 5, health = maxHealth;
let stamina = 100;
let score = 0;
let timer = 30;
let lastHit = 0;
const hitCooldown = 500;
const keys = {};
const enemies = [];
const items = [];

document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// ‚õîÔ∏è Botsing check
function checkCollision(a,b,wA=20,hA=20,wB=40,hB=40){
  return !(a.x+wA<b.x || a.x>b.x+wB || a.y+hA<b.y || a.y>b.y+hB);
}

// ‚ù§Ô∏è Health en stamina updaten
function updateBars(){
  healthbar.style.width = (health/maxHealth*200)+'px';
  staminaBar.style.width = (stamina/100*200)+'px';
}

// üßç Speler bewegen
function movePlayer(){
  let s = speed;
  if(keys['Shift'] && stamina > 0){
    s = speed*2;
    stamina -= 0.7;
    if(stamina < 0) stamina = 0;
  } else if(!keys['Shift'] && stamina < 100){
    stamina += 0.3;
    if(stamina > 100) stamina = 100;
  }

  if(keys['ArrowUp']) y -= s;
  if(keys['ArrowDown']) y += s;
  if(keys['ArrowLeft']) x -= s;
  if(keys['ArrowRight']) x += s;

  x = Math.max(0, Math.min(window.innerWidth-20, x));
  y = Math.max(0, Math.min(window.innerHeight-20, y));

  player.style.left = x+'px';
  player.style.top = y+'px';
}

// üëæ Nieuwe enemy spawnen
function spawnEnemy(){
  const div = document.createElement('div');
  div.classList.add('enemy');
  gameArea.appendChild(div);

  const moveType = Math.floor(Math.random()*4); // 0=stuiter,1=zigzag,2=cirkel,3=random
  enemies.push({
    el:div,
    x:Math.random()*(window.innerWidth-40),
    y:Math.random()*(window.innerHeight-40),
    dx:(Math.random()<0.5?-1:1)*2,
    dy:(Math.random()<0.5?-1:1)*2,
    moveType:moveType,
    angle:0
  });
}

// üçÄ Item spawnen
function spawnItem(type){
  const div = document.createElement('div');
  div.classList.add('item');
  if(type==='health') div.style.background='red';
  if(type==='stamina') div.style.background='lime';
  if(type==='coin') div.style.background='gold';
  div.dataset.type = type;
  div.style.left = Math.random()*(window.innerWidth-20)+'px';
  div.style.top = Math.random()*(window.innerHeight-20)+'px';
  gameArea.appendChild(div);
  items.push({el:div, x:parseInt(div.style.left), y:parseInt(div.style.top), type});
}

// üåç Enemy gedrag
function moveEnemies(){
  enemies.forEach(e=>{
    switch(e.moveType){
      case 0: // stuiteren
        e.x+=e.dx; e.y+=e.dy;
        if(e.x<0||e.x>window.innerWidth-40) e.dx*=-1;
        if(e.y<0||e.y>window.innerHeight-40) e.dy*=-1;
        break;
      case 1: // zigzag
        e.x+=e.dx;
        e.y+=Math.sin(Date.now()/200)*3;
        if(e.x<0||e.x>window.innerWidth-40) e.dx*=-1;
        break;
      case 2: // cirkel
        e.angle+=0.05;
        e.x+=Math.cos(e.angle)*2;
        e.y+=Math.sin(e.angle)*2;
        break;
      case 3: // random
        e.x+=Math.random()*4-2;
        e.y+=Math.random()*4-2;
        break;
    }

    e.el.style.left=e.x+'px';
    e.el.style.top=e.y+'px';

    // botsing speler-enemy
    if(checkCollision({x,y}, e) && Date.now()-lastHit>hitCooldown){
      lastHit=Date.now();
      health--;
      if(health<0) health=0;
      updateBars();
      if(health<=0) return gameOver();
    }
  });
}

// üéÅ Items checken
function checkItems(){
  items.forEach((item,i)=>{
    if(checkCollision({x,y}, item,20,20,20,20)){
      if(item.type==='health' && health<maxHealth) health++;
      if(item.type==='stamina') stamina=Math.min(100,stamina+50);
      if(item.type==='coin') score+=10;
      updateBars();
      scoreDiv.textContent='Score: '+score;
      gameArea.removeChild(item.el);
      items.splice(i,1);
    }
  });
}

// üíÄ Game over
function gameOver(){
  gameOverDiv.style.display='block';
  cancelAnimationFrame(loop);
  clearInterval(timerInterval);
}

// ‚è∞ Timer
const timerInterval = setInterval(()=>{
  if(health<=0) return;
  timer--;
  timerDiv.textContent='Time: '+timer;
  if(timer<=0){
    for(let i=0;i<3;i++) spawnEnemy();
    timer=30;
  }
},1000);

// üéÆ Startgame
for(let i=0;i<5;i++) spawnEnemy();
spawnItem('coin');

// üîÅ Hoofdlus
function gameLoop(){
  if(health<=0) return;
  movePlayer();
  moveEnemies();
  checkItems();

  // Spawn enkel 1 health of stamina pack als nodig
  if(health<=2 && !items.some(i=>i.type==='health')) spawnItem('health');
  if(stamina<=30 && !items.some(i=>i.type==='stamina')) spawnItem('stamina');
  if(Math.random()<0.002) spawnItem('coin'); // af en toe coin

  updateBars();
  requestAnimationFrame(gameLoop);
}

updateBars();
let loop = requestAnimationFrame(gameLoop);
</script>
</body>
</html>
